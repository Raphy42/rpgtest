<link rel=import href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel=import href="adebray-effect.html">

<dom-module id="adebray-effects">
	<template>
		<style>
			:host {
				display: block;
				@apply(--layout-horizontal)
			}
		</style>

	</template>

	<script>
		Polymer({
			is: 'adebray-effects',

			properties: {
				state: {
					type: String,
					value: false
				}
			},

			attached: function () {
				var a = [{
					quantity: 8,
					fun: (frame, quantity) => (e, i) => {
						let c = Math.cos( (frame.time / 8) * Math.PI / 180 + (Math.PI / (quantity / 2)) * (i + 1) )
						let s = Math.sin( (frame.time / 8) * Math.PI / 180 + (Math.PI / (quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
						if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let a = parseInt(127 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	e.fill('rgb(255,' + a + ',0)');
				    }
				}, {
			    	quantity: 4,
			    	fun: (frame, quantity) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( -a + (Math.PI / (quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50 / 2) * Math.cos( -a + (Math.PI / (quantity / 2)) * (i + 1) ) )
				    	e.y( 34 * 2 + 55 + (50 / 10) * s - (b + 1) * 10)
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let c = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + c + ',0,' + 1 + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )

				var a = [{
					quantity: 8,
					fun: (frame, quantity) => (e, i) => {
						let c = Math.cos( (frame.time / 8) * Math.PI / 180 + (Math.PI / (quantity / 2)) * (i + 1) )
						let s = Math.sin( (frame.time / 8) * Math.PI / 180 + (Math.PI / (quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
						if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let a = parseInt(127 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	let a2 = parseInt(200 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	e.fill('rgb( 0, 180,' + (a + 127) + ')');
				    }
				}, {
			    	quantity: 4,
			    	fun: (frame, quantity) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( -a + (Math.PI / (quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50 / 2) * Math.cos( -a + (Math.PI / (quantity / 2)) * (i + 1) ) )
				    	e.y( 34 * 2 + 55 + (50 / 10) * s - (b + 1) * 10)
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let c = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + c + ',0,' + 1 + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )
			}

		});
	</script>
</dom-module>
