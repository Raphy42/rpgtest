<link rel=import href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel=import href="adebray-effect.html">

<dom-module id="adebray-effects">
	<template>
		<style>
			:host {
				display: block;
			}

			:host ::content adebray-effect {
				display: inline-block;
			};
		</style>

	</template>

	<script>
		Polymer({
			is: 'adebray-effects',

			properties: {
				state: {
					type: String,
					value: false
				}
			},

			attached: function () {
				var a = [{
					quantity: 8,
					fun: (frame, FX) => (e, i) => {
						let c = Math.cos( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )
						let s = Math.sin( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
						if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let a = parseInt(127 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	e.fill('rgb(255,' + a + ',0)');
				    }
				}, {
			    	quantity: 4,
			    	fun: (frame, FX) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( -a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50 / 2) * Math.cos( -a + (Math.PI / (FX.quantity / 2)) * (i + 1) ) )
				    	e.y( 34 * 2 + 55 + (50 / 10) * s - (b + 1) * 10)
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let c = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + c + ',0,' + 1 + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )

				var a = [{
					quantity: 8,
					fun: (frame, FX) => (e, i) => {
						let c = Math.cos( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )
						let s = Math.sin( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
						if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let a = parseInt(127 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	let a2 = parseInt(200 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	e.fill('rgb( 0, 180,' + (a + 127) + ')');
				    }
				}, {
			    	quantity: 4,
			    	fun: (frame, FX) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50 ) * Math.cos( a + (Math.PI / (FX.quantity / 2)) * (i + 1) ) )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s - 10)
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let c = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + c + ',0,' + 1 + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )


				var a = [{
					quantity: 8,
					fun: (frame, FX) => (e, i) => {
						let c = Math.cos( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )
						let s = Math.sin( (frame.time / 8) * Math.PI / 180 + (Math.PI / (FX.quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
						if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let a = parseInt(127 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	let a2 = parseInt(200 * Math.abs(Math.cos((frame.time / 8) * Math.PI / 180)))
				    	e.fill('rgb( 0, 180,' + (a + 127) + ')');
				    }
				}, {
			    	quantity: 4,
			    	fun: (frame, FX) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( -a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50 ) * Math.cos( a + (Math.PI / (FX.quantity / 2)) * (i + 1) ) )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s - 10)
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let c = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + c + ',0,' + 1 + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )


				var a = [
				{
			    	quantity: 4,
			    	fun: (frame, FX) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	let c = Math.cos( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )

				    	e.x( 34 * 2 + 26 + (50 ) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s - (b + 1) * 32)

				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let d = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + d + ',0,' + -b + ')');
				    }
				},
				{
			    	quantity: 8,
			    	fun: (frame, FX) => (e, i) => {
						let a = (frame.time / 8) * Math.PI / 180
						let b = Math.cos(a)

				    	let s = Math.sin( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	let c = Math.cos( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				    	e.x( 34 * 2 + 26 + (50) * c )
				    	e.y( 34 * 2 + 55 + (50 / 4) * s )
				    	if (s > 0)
				    		e.moveToTop()
				    	else
				    		e.moveToBottom()

				    	let d = parseInt(127 * Math.abs(b))
				    	e.fill('rgba(255,' + d + ',0,' + (-b) + ')');
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )

				var w = 10
				var h = w / 2
				var a = [{
			    	quantity: 1,
			    	model: new Konva.Shape({
			    		x: 50,
			    		y: 88,
			    		scaleY: 0.5,
						fill: 'red',
						test: 0,
						sceneFunc: function(context) {
						    context.beginPath();
						    context.arc(this.x(), this.y(), 75, 0, Math.PI * 2);
						    context.closePath();
						    context.stroke();

						    for (var i = 0; i < 6; i++) {
						    	let p = Math.PI / 1.5 * i + Math.PI / 180 * this.attrs.test
						    	let n = Math.PI / 1.5 * ((i + 1) % 3) + Math.PI / 180 * this.attrs.test

								var x = 75 * Math.cos(p) + this.x()
								var y = 75 * Math.sin(p) + this.y()

						    	context.beginPath();
							    context.moveTo(100 * Math.cos(p) + this.x(), 100 * Math.sin(p) + this.y())
							    context.lineTo(100 * Math.cos(n) + this.x(), 100 * Math.sin(n) + this.y())
							    context.closePath();
							    context.stroke();

							}

								context.beginPath();
   							for (var i = 0; i < 6; i++) {
						    	let p = Math.PI / 3 * i + Math.PI / 180 * this.attrs.test
						    	let n = Math.PI / 3 * ((i + 1) % 6) + Math.PI / 180 * this.attrs.test

								var x = 75 * Math.cos(p) + this.x()
								var y = 75 * Math.sin(p) + this.y()

							    context.moveTo(50 * Math.cos(p) + this.x(), 50 * Math.sin(p) + this.y())
							    context.lineTo(50 * Math.cos(n) + this.x(), 50 * Math.sin(n) + this.y())
							}
								context.closePath();

					        context.fillStyle = "red";
						    context.fill();
						    context.stroke();

   							for (var i = 0; i < 6; i++) {
						    	let p = Math.PI / 3 * i + Math.PI / 180 * this.attrs.test
						    	let n = Math.PI / 3 * ((i + 1) % 6) + Math.PI / 180 * this.attrs.test

								var x = 75 * Math.cos(p) + this.x()
								var y = 75 * Math.sin(p) + this.y()

								context.beginPath();
							    context.arc(x, y, 25, 0, Math.PI * 2);
								context.closePath();

							    context.fillStyle = "white"
							    context.fill();
							    context.stroke();
						    }



						}
					}),
			    	fun: (frame, FX) => (e, i) => {
						// let a = (frame.time / 8) * Math.PI / 180
						// let b = Math.cos(a)

				  //   	let s = Math.sin( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )
				  //   	let c = Math.cos( a + (Math.PI / (FX.quantity / 2)) * (i + 1) )

				  //   	e.x( 34 * 2 + 26 + (50 ) * c )
				  //   	e.y( 34 * 2 + 55 + (50 / 4) * s - (b + 1) * 32)

				    	// if (e.x() > 0)
 				    // 		e.moveToTop()
				    	// else
				    		e.moveToBottom()

				  //   	let d = parseInt(127 * Math.abs(b))
				  //   	e.fill('rgba(255,' + d + ',0,' + -b + ')');
				  		e.attrs.test += 1
				    }
				}]

				var ef = document.createElement('adebray-effect')
				ef.functions = a
				this.appendChild( ef )

			}

		});
	</script>
</dom-module>
